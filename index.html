<!DOCTYPE html>
<html lang="pt">
<head>
    <!-- ... -->
</head>
<body>
    <!-- ... -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCKh8KhbZqVTNmiXqmhuGuyGfbNok6xZ2I",
            authDomain: "diario-escolar-97964.firebaseapp.com",
            projectId: "diario-escolar-97964",
            storageBucket: "diario-escolar-97964.firebasestorage.app",
            messagingSenderId: "720716760516",
            appId: "1:720716760516:web:10a2a98b94c3d5dca1d091"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        function carregarTarefas() {
            database.ref('tarefas').on('value', (snapshot) => {
                let tarefas = snapshot.val() || [];
                let lista = document.getElementById("listaTarefas");
                lista.innerHTML = "";
                tarefas.forEach((tarefa, index) => {
                    lista.innerHTML += `
                        <div class="task">
                            <div>
                                <strong>${tarefa.titulo}</strong><br>
                                ${tarefa.descricao}<br>
                                <small>Entrega: ${tarefa.data}</small>
                            </div>
                            <button class="delete" onclick="removerTarefa(${index})">X</button>
                        </div>
                    `;
                });
            });
        }

        function adicionarTarefa() {
            let titulo = document.getElementById("titulo").value;
            let descricao = document.getElementById("descricao").value;
            let data = document.getElementById("data").value;

            if (titulo === "" || data === "") {
                alert("Preencha pelo menos o tÃ­tulo e a data!");
                return;
            }

            let tarefa = { titulo, descricao, data };
            database.ref('tarefas').push(tarefa);

            document.getElementById("titulo").value = "";
            document.getElementById("descricao").value = "";
            document.getElementById("data").value = "";
        }

        function removerTarefa(index) {
            database.ref('tarefas').once('value').then((snapshot) => {
                let tarefas = snapshot.val() || [];
                let key = Object.keys(tarefas)[index];
                database.ref('tarefas/' + key).remove();
            });
        }

        document.addEventListener("DOMContentLoaded", carregarTarefas);
    </script>
</body>
</html>
